# eseopl3patcher

A tool to convert a YM3812(OPL2) VGM file to a YMF262(OPL3) VGM file

## Overview

eseopl3patcher is a command-line tool that converts VGM files made for YM3812 (OPL2) to OPL3 (YMF262) format. It utilizes the OPL3’s extra channels, adding detuned voices for a chorus effect.

## Features

- Converts YM3812(OPL2) commands to OPL3(YMF262) commands
- Applies detuning to the OPL3 extra channels (channels 9–17)
- Automatically appends conversion info and operator information to the GD3 tag
- Simple command line usage

## Input Parameters

- VGM file (YM3812/OPL2 format)
- Detune ratio (percentage, e.g. 2.5 means +2.5% detune)
    - **Note**: If you specify `1.0`, it will be treated as `100%` detune (for backward compatibility, 1.0 = 100%).  
      For example: `2.5` = 2.5%, `1.0` = 100%, `0.5` = 50%.
- KeyOn wait (integer, e.g. 1)
- Operator of this program (the string specified here will be appended to the GD3 Creator field)

### About Detune Ratio (+/- specification)

- You can specify positive or negative values for the detune ratio.
    - A positive value (e.g., 2.5) will be added to the FNumber, resulting in a higher pitch.
    - A negative value (e.g., -2.5) will be subtracted from the FNumber, resulting in a lower pitch.
- Example values:
    - `2.5` … Adds +2.5% to the FNumber
    - `-2.5` … Subtracts -2.5% from the FNumber

> **The sign of the detune value determines whether the pitch after conversion is raised or lowered. Specify according to your needs.**

- Note: Specifying a detune value of 1.0 will be treated as 100% for backward compatibility.

## Usage

```sh
eseopl3patcher <input.vgm> <detune_ratio> <keyon_wait> <operator> [-o output.vgm]
```

Example:
```sh
eseopl3patcher sample.vgm 2.5 1 "YourName"
```

- `<input.vgm>` : VGM file to convert (YM3812/OPL2 format)
- `<detune_ratio>` : Detune ratio (percentage, e.g. 2.5 for 2.5%. 1.0 is treated as 100%.)
- `<keyon_wait>` : KeyOn wait (integer, e.g. 1)
- `<operator>` : Operator of this program (the string specified here will be appended to the GD3 Creator field)
- `-o output.vgm` : Output file name (optional, autogenerated if omitted)

## Download

[![Download for Linux and Windows](https://img.shields.io/github/v/release/emef2247/eseopl3patcher?label=Download%20latest%20release)](https://github.com/emef2247/eseopl3patcher/releases/latest)

You can download pre-built binaries for **Linux** and **Windows** from the [latest release page](https://github.com/emef2247/eseopl3patcher/releases/latest).

## License

MIT License